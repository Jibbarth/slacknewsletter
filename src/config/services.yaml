# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:
    slack_token: '%env(SLACK_TOKEN)%'
    env(CHANNELS_FILE): '%kernel.project_dir%/config/channels.json'
    env(RECEIVERS_FILE): '%kernel.project_dir%/config/receivers.json'
    slack_channels: '%env(json:file:CHANNELS_FILE)%'
    days_to_browse: 1
    locale: 'en'

    mail_template:
        main_color: "#bb2280"
        background_color: "#f7f7f7"
        section_title_color: "#FFF"
        logo: "http://directorofawesome.com/wp-content/uploads/2017/09/slacklogo.png"
        company_name: 'Awesome Company'

    blacklist_urls:
        - "slack.com/?redir="
        - "slack.com/files/"
        - "giphy.com/"

    news_receivers: '%env(json:file:RECEIVERS_FILE)%'
    mail_sender: "news@example.com"

services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        public: false       # Allows optimizing the container by removing unused services; this also means
                            # fetching services directly from the container via $container->get() won't work.
                            # The best practice is to be explicit about your dependencies anyway.
        bind:
            $slackToken: '%slack_token%'
            $slackChannels: '%slack_channels%'
            $blacklistUrls: '%blacklist_urls%'
            $daysToBrowse: '%days_to_browse%'
            $publicDir: '%kernel.project_dir%/public/'

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/*'
        exclude: '../src/{Entity,Migrations,Tests}'

    # controllers are imported separately to make sure services can be injected
    # as action arguments even if you don't extend any base controller class
    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    App\Service\Newsletter\RenderService:
        arguments:
            - '@twig'
            - '%mail_template%'

    App\Command\AppNewsletterSendCommand:
        bind:
            $newsReceivers: '%news_receivers%'
            $mailSender: '%mail_sender%'
    # add more service definitions when explicit configuration is needed
    # please note that last definitions always *replace* previous ones
